---
# All variables needed to deploy an undercloud

rhos_release_rpm:

# OSP/OSPd versioning and build
version: 12
rhel_version: 7.4
rhos_release: 12-director
build: "2017-07-22.2"

rebuild_undercloud: "{{ lookup('env', 'OSP_REBUILD_UNDERCLOUD')|default(true, true) }}"

overcloud_image_password: debug

# Introspection parameters:
# No introspection at all - adjusts instackenv to not require introspection
instackenv_no_introspection: false
node_provide_timeout: 1800
# bulk introspection
introspection: true
# Introspection Script (Disable bulk if using)
introspect_with_retry: false

# Ironic automated cleaning (Use when introspection script is disabled)
node_cleaning: true

# Stack user password:
# Make a new password:
# python -c "from passlib.hash import sha512_crypt; print sha512_crypt.encrypt('password')"
stack_password: $6$rounds=656000$3ZalBI1dHsb8kfJI$XbtraTo6qcAfAHR158Wf4mLoUrDQsTCIWSAZevFapJIq2OS/qATHQ39PwsJ6JusOBue3nxeNm5mTBM3m97EnQ.

####################################################################################################
# Network Setup
####################################################################################################
# Undercloud control plane interface:
local_interface: "{{ lookup('env', 'OSP_UNDERCLOUD_LOCAL_INTERFACE')|default('enp94s0f1', true) }}"

# External Network Setup:
# 0 - private external network (Unlimited private floating ips)
# 1 - public external network (Limited public floating ips)
external_network_setup: "{{ lookup('env', 'OSP_EXTERNAL_NETWORK_SETUP')|default(0, true) }}"

# Settings for both Network Setups
dns_server: "{{ lookup('env', 'OSP_DNS_SERVER') }}"
external_vlan: "{{ lookup('env', 'OSP_EXTERNAL_VLAN')|default('10', true) }}"
external_network_pool_start: "{{ lookup('env', 'OSP_EXTERNAL_NET_POOL_START')|default('172.21.0.3', true) }}"
external_network_pool_end: "{{ lookup('env', 'OSP_EXTERNAL_NET_POOL_END')|default('172.21.0.254', true) }}"
external_network_gateway: "{{ lookup('env', 'OSP_EXTERNAL_NET_GATEWAY')|default('172.21.0.1', true) }}"
external_network_cidr: "{{ lookup('env', 'OSP_EXTERNAL_NET_CIDR')|default('172.21.0.0/16', true) }}"
external_network_vip: "{{ lookup('env', 'OSP_EXTERNAL_NETWORK_VIP')|default('172.21.0.2', true) }}"

# The floating ip pool should be in the same range as the external network (but not overlap with external pool):
fip_pool_start: "{{ lookup('env', 'OSP_FIP_POOL_START')|default('172.21.1.1', true) }}"
fip_pool_end: "{{ lookup('env', 'OSP_FIP_POOL_END')|default('172.21.255.254', true) }}"

# Network Settings specific to Network setup 0 (private external)
undercloud_public_interface: "{{ lookup('env', 'OSP_UNDERCLOUD_PUBLIC_INTERFACE')|default('eno1', true) }}"
undercloud_external_vlan_device: "{{ lookup('env', 'OSP_UNDERCLOUD_PRIVATE_EXTERNAL_INTERFACE')|default('enp94s0f3', true) }}.{{external_vlan}}"

private_external_address: "{{ lookup('env', 'OSP_PRIVATE_EXTERNAL_ADDRESS')|default('172.21.0.1', true) }}"
private_external_netmask: "{{ lookup('env', 'OSP_PRIVATE_EXTERNAL_NETMASK')|default('255.255.0.0', true) }}"

# Network Settings specific to Network setup 1 (public external)
# None for now


# Get the time server from the NTP_SERVER environment variable.
ntp_server: "{{ lookup('env', 'NTP_SERVER')|default('0.pool.ntp.org', true) }}"

# instackenv:
instackenv_json:

cloud_title:
ticket_number:
foreman_url:
